<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{{cssUri}}" />
</head>
<body>
  <div id="root">
    <!-- Progress bar -->
    <div class="progress-bar-track" id="progressTrack">
      <div class="progress-bar-fill" id="progressFill"></div>
    </div>

    <!-- Header -->
    <div class="header">
      <div class="header-title" id="headerTitle">No replay loaded</div>
      <div class="header-subtitle" id="headerSubtitle"></div>
    </div>

    <!-- File transition banner -->
    <div class="transition-banner" id="transitionBanner" style="display: none;">
      <span class="transition-arrow">&#10132;</span>
      <span class="transition-text" id="transitionText">Opening file...</span>
    </div>

    <!-- Pre-generation progress -->
    <div class="pregen-status" id="pregenStatus" style="display: none;">
      <div class="pregen-progress-bar">
        <div class="pregen-progress-fill" id="pregenFill"></div>
      </div>
      <div class="pregen-text" id="pregenText">Preparing audio...</div>
    </div>

    <!-- Trace notification card (shown when new trace detected) -->
    <div class="trace-notification" id="traceNotification">
      <div class="trace-notification-card">
        <div class="trace-notification-icon">&#x1F3AC;</div>
        <div class="trace-notification-title">New walkthrough ready</div>
        <div class="trace-notification-detail" id="traceNotificationDetail"></div>
        <div class="trace-notification-filename" id="traceNotificationFilename"></div>
        <div class="trace-notification-actions">
          <button class="trace-notification-btn trace-notification-btn-primary" id="btnWalkthrough">
            &#x25B6; Walk Me Through It
          </button>
          <button class="trace-notification-btn trace-notification-btn-secondary" id="btnViewSummary">
            &#x1F4CB; View Summary
          </button>
          <button class="trace-notification-dismiss" id="btnDismissNotification">Dismiss</button>
        </div>
      </div>
    </div>

    <!-- Step list -->
    <div class="step-list" id="stepList">
      <div class="empty-state" id="emptyState">
        <p>No replay loaded</p>
        <button class="load-replay-btn" id="btnLoadReplay">
          <span class="load-replay-icon">&#x1F4C2;</span>
          Load Replay
        </button>
        <p class="empty-state-hint">or use <code>Ctrl+Shift+P</code> &rarr; <strong>Debrief: Load Replay</strong></p>
      </div>
    </div>

    <!-- Narration panel -->
    <div class="narration-panel" id="narrationPanel">
      <div class="narration-label">Narration</div>
      <div class="narration-text" id="narrationText"></div>
    </div>

    <!-- Playback controls -->
    <div class="controls" id="controls">
      <button class="control-btn" id="btnPrev" title="Previous step (Alt+Left)" disabled>
        &#9664;&#9664;
      </button>
      <button class="control-btn control-btn-play" id="btnPlayPause" title="Play (Space)">
        &#9654;
      </button>
      <button class="control-btn" id="btnNext" title="Next step (Alt+Right)" disabled>
        &#9654;&#9654;
      </button>
    </div>
  </div>

  <script src="{{jsUri}}"></script>
</body>
</html>
